<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.lhasalimited.etransafe.wp6.clinical.mapper.CompoundMapper">
  <resultMap id="BaseResultMap" type="org.lhasalimited.etransafe.wp6.clinical.entity.IndexCompound" >
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 09 16:10:39 BST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="compound_identifier" jdbcType="VARCHAR" property="compoundIdentifier" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="inchi" jdbcType="VARCHAR" property="inchi" />
    <result column="inchikey" jdbcType="VARCHAR" property="inchiKey" />
    <result column="smiles" jdbcType="VARCHAR" property="smiles" />
    <result column="organisation" jdbcType="VARCHAR" property="organisation" />
    <result column="confidentiality" jdbcType="VARCHAR" property="confidentiality" />
    <collection  property="studyIds" select="selectStudies" javaType="list" ofType="java.lang.Integer" column="id" />
  	
  </resultMap>
  
   <resultMap id="ResultMapStudies" type="java.util.List">
      <result column="s_ids"/>
   </resultMap>
  
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select index_compound.id, compound_identifier, name, inchi, inchikey, smiles, organisation, 
    confidentiality
    from index_compound
    where index_compound.id = #{id,jdbcType=INTEGER}
  </select>
 
  <select id="selectAll" resultMap="BaseResultMap">
    select index_compound.id, compound_identifier, name, inchi, inchikey, smiles, organisation, 
    confidentiality
    from index_compound
    limit #{offset}, #{limit} 
  </select>
  
   <select id="selectStudies"  resultType="int">
    select index_compound_study.index_study_id as s_ids
    from index_compound_study
    where index_compound_study.index_compound_id = #{id}
  </select>
   
   <select id="countAll" resultType="int">
    select count(*) from index_compound
  </select>
  
</mapper>